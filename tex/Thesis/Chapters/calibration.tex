% Chapter 1

\chapter{Parameter tuning} % Main chapter title

\label{chapter:high_frequency_trading} % For referencing the chapter elsewhere, use \ref{Chapter1} 
$\frac{}{}$
\lhead{Chapter XXX. \emph{XXX}} % This is for the header on each page - perhaps a shortened title
	
%----------------------------------------------------------------------------------------


Chapter \label{chapter:model_calibration} presented the model...XXX

The model has several parameters which must be selected carefully before the simulation can be used for XXX. The parameter tuning has two overall goals, which can be separated as follows. 

First of all, the model must be calibrated such that it mimics the behavior of real markets. Since virtually every aspect of the simulation behavior depends on the values on the various parameters, these must be chosen carefully in order for the simulation to produce realistic behavior. An example of a simulation untuned parameters causing  unrealistic behavior is given in figure \ref{subfig:unrealistic_behavior}. Selecting realistic parameters is by far a simple task. First of all, it requires a way of quantifying the quality of each simulation. The choice of such a quantification is discussed in section \ref{section:simulation_fitness}. Secondly, there might be several different parameter configurations which produce seemingly realistic behavior, but do not correspond to a realistic market setting. An example for this is given in figure \ref{subfig:unrealistic_parameters}, and section \ref{section:filtering_parameters} briefly discusses this point. 
\begin{figure}
\subcaptionbox{Parameters causing unrealistic dynamics\label{subfig:unrealistic_behavior}}
[0.49\linewidth]{\includegraphics[width=0.5\textwidth]{Electron.pdf}}
\subcaptionbox{Unrealistic parameters causing realistic dynamics\label{subfig:unrealistic_parameters}}
[0.49\linewidth]{\includegraphics[width=0.5\textwidth]{Electron.pdf}}
\caption{\textbf{Motivatoin for tuning:} the two}\label{fig:tuning_motivation}
\end{figure}
The second goal of the parameter tuning is to find parameters which promotes certain desirable behaviors. For instance, we might be interested in determining which parameters causes the traded price to stabilize faster after a shock to the fundamental price. Metrics for doing this is discussed in section \ref{section:simulation_fitness}


\begin{enumerate}
\item Fix some of the model parameters in order to reduce the search space for the optimization algorithm.
\item Use an optimization algorithm to find sets of parameters which yield realistic model behavior.
\item From the set of parameter combinations found by the optimization algorithm, remove the parameter combinations which are deemed to be unrealistic.
\end{enumerate}

\subsection{â€¢}
The large number of parameters makes it difficult to use most numerical methods due to the time it takes to evaluate a single set of parameters. Furthermore, the inherent randomness in the model means that the behavior of several simulations with the same set of parameters varies significantly. Therefore, two steps are required.
\begin{enumerate}
\item Reducing the number of parameters that need to be optimized
\item Run the simulation several times with each set of parameters and calculate summarizing statistics of the model behavior
\end{enumerate}
The second point is trivial, and merely requires additional computation, but the first point requires us to consider which parameters can be fixed without making the model less realistic. to do this, we divide the parameters into three categories as follows:
\begin{description}
\item[Fixed across all experiments] These are parameters such as market rules, and simulation settings, 
\item[Fixed for each experiment] These are parameters which 
\item[Optimized for each experiment] These are the 
\end{description}




\subsubsection{Filtering parameters}\label{section:filtering_parameters}
As mentioned earlier, it is not enough simply to define a fitness function which assigns high values to parameters causing realistic behavior. In addition, it is important to discard parameters which obviously do not correspond to a realistic setting. Imagine that the simulation scores high fitness values when executed without any market makers. Since it is known that real markets do in fact contain market makers, nothing can be inferred from such a result. Indeed this might be a consequence of poorly designed fitness measures, but since it is easier to use domain specific knowledge to filter out the unrealistic parameters

\begin{figure}[htbp]
	\centering
		\includegraphics{Figures/Electron.pdf}
		\rule{35em}{0.5pt}
	\caption{Example of a simulation which is assigned fairly good fitness values, but which was executed with clearly unrealistic parameters: $\nhft = \nsc = 0$. The simulation reaches the new fundamental price fairly quickly without any undershoot, and stays within the stability margin. The only point where it scores badly is the standard deviation which is slightly high due to the fluctuating trade price.}
	\label{fig:no_marketmakers}
\end{figure}

		


\subsubsection{Fixed parameters}
Due to the computational cost of running the simulation for a large number of rounds, the the number of rounds is fixed at $10^5$ for all experiments.




\subsection{Model fitness}\label{section:simulation_fitness}

In order to use inverse simulation, it is necessary to decide on how to measure the quality of an instance of the simulation. 



In this work, the overall goal is to examine which parameter values cause the market to be stable, and which cause it to be unstable. 


Another interesting point is the speed with which the market responds to the shock to the fundamental price, and which parameters influence this property. Furthermore, we are interested in investigating whether or not 

\begin{itemize}
\item 
\item Are there certain parameter combinations which cause the market to behave in certain ways. S
\end{itemize}
\item Which parameters ca



In particular the parameters controlling various time delays are of interest. 

The search space of the parameters is very large, which makes an exhaustive search impossible.





To this end, four fitness measures were defined.

The balance between the number 
Several parameters influence the number of orders submitted by the high frequency traders.

\subsection{Fixed number of agents}
In the experiments in this subsection, the number of agents are kept fixed. 

\begin{table}
\begin{tabular}{c|c}
\textbf{Parameter} & \textbf{Range}\\
nhftmm & 
nhftsc & 

\end{tabular}
\caption{Overview of experiments}
\end{table}


\section{Selecting objective}
Since each of the four fitness measures described in section \ref{section:simulation_fitness} can be maximized or minimized, there are 16 possible search objectives for the optimization. For instance, maximizing 


Inverse simulation is a handy tool, because it becomes possible to find parameters 

\subsection{Optimizing towards }


\begin{itemize}
\item 
\end{itemize}


